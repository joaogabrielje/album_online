"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/route";
exports.ids = ["app/api/upload/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=C%3A%5Cdev%5Csites%5Calbum_online%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cdev%5Csites%5Calbum_online&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=C%3A%5Cdev%5Csites%5Calbum_online%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cdev%5Csites%5Calbum_online&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_dev_sites_album_online_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/upload/route.ts */ \"(rsc)/./src/app/api/upload/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/route\",\n        pathname: \"/api/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/route\"\n    },\n    resolvedPagePath: \"C:\\\\dev\\\\sites\\\\album_online\\\\src\\\\app\\\\api\\\\upload\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_dev_sites_album_online_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDZGV2JTVDc2l0ZXMlNUNhbGJ1bV9vbmxpbmUlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNkZXYlNUNzaXRlcyU1Q2FsYnVtX29ubGluZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDYTtBQUMxRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3Bob3RvLWFsYnVtLXN5c3RlbS8/YjU3YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxkZXZcXFxcc2l0ZXNcXFxcYWxidW1fb25saW5lXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHVwbG9hZFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXBsb2FkL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXBsb2FkXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS91cGxvYWQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxkZXZcXFxcc2l0ZXNcXFxcYWxidW1fb25saW5lXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHVwbG9hZFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdXBsb2FkL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=C%3A%5Cdev%5Csites%5Calbum_online%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cdev%5Csites%5Calbum_online&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/upload/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/upload/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist-node/v4.js\");\n\n\n\n\nasync function POST(request) {\n    try {\n        // Configurar timeout maior para arquivos grandes\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), 10 * 60 * 1000) // 10 minutos\n        ;\n        const data = await request.formData();\n        const files = data.getAll(\"photos\");\n        const albumId = data.get(\"albumId\");\n        clearTimeout(timeoutId);\n        if (!files || files.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Nenhuma foto foi enviada\"\n            }, {\n                status: 400\n            });\n        }\n        if (!albumId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"ID do \\xe1lbum \\xe9 obrigat\\xf3rio\"\n            }, {\n                status: 400\n            });\n        }\n        const uploadedPhotos = [];\n        let totalSize = 0;\n        // Log do progresso para arquivos grandes\n        console.log(`Iniciando upload de ${files.length} arquivo(s) para álbum ${albumId}`);\n        for (const [index, file] of files.entries()){\n            console.log(`Processando arquivo ${index + 1}/${files.length}: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)}MB)`);\n            totalSize += file.size;\n            const bytes = await file.arrayBuffer();\n            const buffer = Buffer.from(bytes);\n            // Gerar nome único para o arquivo\n            const fileExtension = file.name.split(\".\").pop();\n            const fileName = `${(0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])()}.${fileExtension}`;\n            // Caminho do arquivo\n            const uploadDir = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(process.cwd(), \"public\", \"uploads\", \"albums\", albumId);\n            // Criar diretório se não existir\n            const fs = __webpack_require__(/*! fs */ \"fs\");\n            if (!fs.existsSync(uploadDir)) {\n                fs.mkdirSync(uploadDir, {\n                    recursive: true\n                });\n            }\n            const filePath = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(uploadDir, fileName);\n            // Salvar arquivo\n            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.writeFile)(filePath, buffer);\n            // URL pública da foto\n            const photoUrl = `/uploads/albums/${albumId}/${fileName}`;\n            uploadedPhotos.push({\n                id: (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(),\n                name: file.name,\n                url: photoUrl,\n                originalName: file.name,\n                size: file.size,\n                uploadedAt: new Date().toISOString()\n            });\n        }\n        console.log(`Upload concluído: ${uploadedPhotos.length} arquivo(s), ${(totalSize / 1024 / 1024).toFixed(2)}MB total`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            photos: uploadedPhotos,\n            message: `${uploadedPhotos.length} foto(s) enviada(s) com sucesso! Total: ${(totalSize / 1024 / 1024).toFixed(2)}MB`,\n            totalSize: totalSize\n        });\n    } catch (error) {\n        console.error(\"Erro no upload:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Erro interno do servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0ssWUFBWSxPQUFPLElBQUcsRUFBR1EsT0FBTyxDQUFDLEdBQUcsUUFBUSxDQUFDO1FBRXBILE9BQU9oQyxxREFBWUEsQ0FBQ29CLElBQUksQ0FBQztZQUN2QnVDLFNBQVM7WUFDVEMsUUFBUXJDO1lBQ1JzQyxTQUFTLENBQUMsRUFBRXRDLGVBQWVKLE1BQU0sQ0FBQyx3Q0FBd0MsRUFBRSxDQUFDSyxZQUFZLE9BQU8sSUFBRyxFQUFHUSxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDcEhSLFdBQVdBO1FBQ2I7SUFFRixFQUFFLE9BQU9ILE9BQU87UUFDZEksUUFBUUosS0FBSyxDQUFDLG1CQUFtQkE7UUFDakMsT0FBT3JCLHFEQUFZQSxDQUFDb0IsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBMkIsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDaEY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Bob3RvLWFsYnVtLXN5c3RlbS8uL3NyYy9hcHAvYXBpL3VwbG9hZC9yb3V0ZS50cz81MTIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcclxuaW1wb3J0IHsgd3JpdGVGaWxlIH0gZnJvbSAnZnMvcHJvbWlzZXMnXHJcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJ1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJ1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gQ29uZmlndXJhciB0aW1lb3V0IG1haW9yIHBhcmEgYXJxdWl2b3MgZ3JhbmRlc1xyXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxyXG4gICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIDEwICogNjAgKiAxMDAwKSAvLyAxMCBtaW51dG9zXHJcbiAgICBcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKClcclxuICAgIGNvbnN0IGZpbGVzOiBGaWxlW10gPSBkYXRhLmdldEFsbCgncGhvdG9zJykgYXMgRmlsZVtdXHJcbiAgICBjb25zdCBhbGJ1bUlkID0gZGF0YS5nZXQoJ2FsYnVtSWQnKSBhcyBzdHJpbmdcclxuXHJcbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKVxyXG5cclxuICAgIGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTmVuaHVtYSBmb3RvIGZvaSBlbnZpYWRhJyB9LCB7IHN0YXR1czogNDAwIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFhbGJ1bUlkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSUQgZG8gw6FsYnVtIMOpIG9icmlnYXTDs3JpbycgfSwgeyBzdGF0dXM6IDQwMCB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVwbG9hZGVkUGhvdG9zID0gW11cclxuICAgIGxldCB0b3RhbFNpemUgPSAwXHJcblxyXG4gICAgLy8gTG9nIGRvIHByb2dyZXNzbyBwYXJhIGFycXVpdm9zIGdyYW5kZXNcclxuICAgIGNvbnNvbGUubG9nKGBJbmljaWFuZG8gdXBsb2FkIGRlICR7ZmlsZXMubGVuZ3RofSBhcnF1aXZvKHMpIHBhcmEgw6FsYnVtICR7YWxidW1JZH1gKVxyXG5cclxuICAgIGZvciAoY29uc3QgW2luZGV4LCBmaWxlXSBvZiBmaWxlcy5lbnRyaWVzKCkpIHtcclxuICAgICAgY29uc29sZS5sb2coYFByb2Nlc3NhbmRvIGFycXVpdm8gJHtpbmRleCArIDF9LyR7ZmlsZXMubGVuZ3RofTogJHtmaWxlLm5hbWV9ICgkeyhmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX1NQilgKVxyXG4gICAgICB0b3RhbFNpemUgKz0gZmlsZS5zaXplXHJcbiAgICAgIGNvbnN0IGJ5dGVzID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpXHJcbiAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKVxyXG5cclxuICAgICAgLy8gR2VyYXIgbm9tZSDDum5pY28gcGFyYSBvIGFycXVpdm9cclxuICAgICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IGZpbGUubmFtZS5zcGxpdCgnLicpLnBvcCgpXHJcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7dXVpZHY0KCl9LiR7ZmlsZUV4dGVuc2lvbn1gXHJcbiAgICAgIFxyXG4gICAgICAvLyBDYW1pbmhvIGRvIGFycXVpdm9cclxuICAgICAgY29uc3QgdXBsb2FkRGlyID0gam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ3VwbG9hZHMnLCAnYWxidW1zJywgYWxidW1JZClcclxuICAgICAgXHJcbiAgICAgIC8vIENyaWFyIGRpcmV0w7NyaW8gc2UgbsOjbyBleGlzdGlyXHJcbiAgICAgIGNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKVxyXG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmModXBsb2FkRGlyKSkge1xyXG4gICAgICAgIGZzLm1rZGlyU3luYyh1cGxvYWREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gam9pbih1cGxvYWREaXIsIGZpbGVOYW1lKVxyXG4gICAgICBcclxuICAgICAgLy8gU2FsdmFyIGFycXVpdm9cclxuICAgICAgYXdhaXQgd3JpdGVGaWxlKGZpbGVQYXRoLCBidWZmZXIpXHJcbiAgICAgIFxyXG4gICAgICAvLyBVUkwgcMO6YmxpY2EgZGEgZm90b1xyXG4gICAgICBjb25zdCBwaG90b1VybCA9IGAvdXBsb2Fkcy9hbGJ1bXMvJHthbGJ1bUlkfS8ke2ZpbGVOYW1lfWBcclxuICAgICAgXHJcbiAgICAgIHVwbG9hZGVkUGhvdG9zLnB1c2goe1xyXG4gICAgICAgIGlkOiB1dWlkdjQoKSxcclxuICAgICAgICBuYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgICAgdXJsOiBwaG90b1VybCxcclxuICAgICAgICBvcmlnaW5hbE5hbWU6IGZpbGUubmFtZSxcclxuICAgICAgICBzaXplOiBmaWxlLnNpemUsXHJcbiAgICAgICAgdXBsb2FkZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coYFVwbG9hZCBjb25jbHXDrWRvOiAke3VwbG9hZGVkUGhvdG9zLmxlbmd0aH0gYXJxdWl2byhzKSwgJHsodG90YWxTaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9TUIgdG90YWxgKVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgICBzdWNjZXNzOiB0cnVlLCBcclxuICAgICAgcGhvdG9zOiB1cGxvYWRlZFBob3RvcyxcclxuICAgICAgbWVzc2FnZTogYCR7dXBsb2FkZWRQaG90b3MubGVuZ3RofSBmb3RvKHMpIGVudmlhZGEocykgY29tIHN1Y2Vzc28hIFRvdGFsOiAkeyh0b3RhbFNpemUgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX1NQmAsXHJcbiAgICAgIHRvdGFsU2l6ZTogdG90YWxTaXplXHJcbiAgICB9KVxyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJybyBubyB1cGxvYWQ6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0Vycm8gaW50ZXJubyBkbyBzZXJ2aWRvcicgfSwgeyBzdGF0dXM6IDUwMCB9KVxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ3cml0ZUZpbGUiLCJqb2luIiwidjQiLCJ1dWlkdjQiLCJQT1NUIiwicmVxdWVzdCIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJkYXRhIiwiZm9ybURhdGEiLCJmaWxlcyIsImdldEFsbCIsImFsYnVtSWQiLCJnZXQiLCJjbGVhclRpbWVvdXQiLCJsZW5ndGgiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJ1cGxvYWRlZFBob3RvcyIsInRvdGFsU2l6ZSIsImNvbnNvbGUiLCJsb2ciLCJpbmRleCIsImZpbGUiLCJlbnRyaWVzIiwibmFtZSIsInNpemUiLCJ0b0ZpeGVkIiwiYnl0ZXMiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJmaWxlRXh0ZW5zaW9uIiwic3BsaXQiLCJwb3AiLCJmaWxlTmFtZSIsInVwbG9hZERpciIsInByb2Nlc3MiLCJjd2QiLCJmcyIsInJlcXVpcmUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwiZmlsZVBhdGgiLCJwaG90b1VybCIsInB1c2giLCJpZCIsInVybCIsIm9yaWdpbmFsTmFtZSIsInVwbG9hZGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdWNjZXNzIiwicGhvdG9zIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/upload/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=C%3A%5Cdev%5Csites%5Calbum_online%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cdev%5Csites%5Calbum_online&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();